<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Management Architecture</title>
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
            --border: #334155;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            
            --src-inv: #3b82f6; /* Blue: Inventory */
            --src-ord: #10b981; /* Green: Orders */
            --src-seo: #f59e0b; /* Orange: SEO */
            --src-ai: #8b5cf6;  /* Purple: AI Output */
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            padding: 40px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 { font-size: 2.5rem; font-weight: 300; margin-bottom: 10px; text-align: center; }
        h2 { font-size: 1.1rem; color: var(--text-muted); font-weight: 400; margin-bottom: 60px; text-align: center; }

        /* GRID LAYOUT */
        .pipeline-grid {
            display: grid;
            grid-template-columns: 1fr 80px 1fr 80px 1fr;
            align-items: center;
            gap: 20px;
        }

        /* ARROWS */
        .arrow {
            display: flex;
            justify-content: center;
            font-size: 24px;
            color: var(--text-muted);
            opacity: 0.5;
        }

        /* CARDS */
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            height: 100%;
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 15px;
        }
        
        .icon { font-size: 20px; }
        .card-title { font-weight: 700; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; }

        /* DATA TABLES REPRESENTATION */
        .mini-table {
            width: 100%;
            font-size: 11px;
            color: var(--text-muted);
            border-collapse: collapse;
            font-family: 'Fira Code', monospace;
        }
        .mini-table th { text-align: left; color: #64748b; padding-bottom: 5px; }
        .mini-table td { border-top: 1px solid #334155; padding: 6px 0; }
        
        .highlight { font-weight: 700; color: white; }
        .highlight.inv { color: var(--src-inv); }
        .highlight.ord { color: var(--src-ord); }
        .highlight.seo { color: var(--src-seo); }

        /* BADGES */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
            margin-top: 15px;
            background: rgba(255,255,255,0.05);
        }

        /* COLUMN STYLES */
        .col-1 .card { border-top: 4px solid var(--src-inv); }
        .col-2 .card { border-top: 4px solid var(--src-ord); }
        .col-3 .card { border-top: 4px solid var(--src-ai); }

        /* CONNECTORS */
        .flow-line {
            position: absolute;
            top: 50%;
            left: -20px;
            width: 20px;
            height: 2px;
            background: var(--border);
        }

        .db-label {
            font-size: 10px;
            color: #64748b;
            margin-bottom: 5px;
            display: block;
        }

    </style>
</head>
<body>

<div class="container">
    <h1>The Data Fusion Engine</h1>
    <h2>Merging Historical Depth with Real-Time Availability for 5 Platforms</h2>

    <div class="pipeline-grid">
        
        <!-- INPUTS COLUMN -->
        <div class="column col-1">
            
            <!-- LIVE INVENTORY CARD -->
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-header">
                    <span class="icon">üì¶</span>
                    <span class="card-title" style="color:var(--src-inv)">Live Inventory (Supply)</span>
                </div>
                <span class="db-label">Source: Weekly CSV Imports</span>
                <table class="mini-table">
                    <tr><th>Field</th><th>Purpose</th></tr>
                    <tr><td class="highlight inv">published_at</td><td>Calculates "Freshness" (New vs Old)</td></tr>
                    <tr><td class="highlight inv">az_price</td><td>Baseline Market Value</td></tr>
                    <tr><td class="highlight inv">price</td><td>Our Wholesale Cost</td></tr>
                    <tr><td>qty</td><td>Stock Depth / Urgency</td></tr>
                </table>
                <div class="badge" style="color:var(--src-inv)">Logic: analyzeAllInventories_V11</div>
            </div>

            <!-- HISTORICAL ORDERS CARD -->
            <div class="card">
                <div class="card-header">
                    <span class="icon">üìÖ</span>
                    <span class="card-title" style="color:var(--src-ord)">3-Year History (Trends)</span>
                </div>
                <span class="db-label">Source: public.order_888lots (Supabase)</span>
                <table class="mini-table">
                    <tr><th>Field</th><th>Purpose</th></tr>
                    <tr><td class="highlight ord">order_date</td><td>Detects Seasonality Patterns</td></tr>
                    <tr><td class="highlight ord">category</td><td>Identifies "Market Leaders"</td></tr>
                    <tr><td class="highlight ord">brand</td><td>Tracks Brand Loyalty</td></tr>
                    <tr><td>qty</td><td>Volume Velocity Analysis</td></tr>
                </table>
                <div class="badge" style="color:var(--src-ord)">Logic: generateAlmanac (Trends Script)</div>
            </div>

        </div>

        <!-- ARROW -->
        <div class="arrow">‚ûî</div>

        <!-- PROCESSING CENTER -->
        <div class="column col-2">
            <div class="card" style="border-top: 4px solid #f59e0b; height: auto;">
                <div class="card-header">
                    <span class="icon">‚öôÔ∏è</span>
                    <span class="card-title" style="color:#f59e0b">The Enrichment Layer</span>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <strong style="font-size:12px; color:var(--src-inv)">1. Profit Calculation</strong>
                    <p style="font-size:11px; color:var(--text-muted); margin:0;">
                        <code>(az_price - price) = Gross Profit</code><br>
                        <em>Safety: Flags discrepancies > 3.0x ratio</em>
                    </p>
                </div>

                <div style="margin-bottom: 20px;">
                    <strong style="font-size:12px; color:var(--src-ord)">2. Trend Matching</strong>
                    <p style="font-size:11px; color:var(--text-muted); margin:0;">
                        Matches current date to historical <code>order_date</code> peaks.<br>
                        <em>Example: "November = Black Friday Blitz"</em>
                    </p>
                </div>

                <div>
                    <strong style="font-size:12px; color:var(--src-seo)">3. SEO Injection</strong>
                    <p style="font-size:11px; color:var(--text-muted); margin:0;">
                        Merges GSC Data (Clicks/Impressions) to prioritize high-traffic inventory.
                    </p>
                </div>
            </div>
        </div>

        <!-- ARROW -->
        <div class="arrow">‚ûî</div>

        <!-- OUTPUT COLUMN -->
        <div class="column col-3">
            <div class="card">
                <div class="card-header">
                    <span class="icon">‚ú®</span>
                    <span class="card-title" style="color:var(--src-ai)">Final Intelligence</span>
                </div>
                <span class="db-label">Destination: public.HTML (Supabase)</span>
                
                <div style="background:#0f172a; padding:15px; border-radius:8px; font-size:12px; border:1px solid #334155;">
                    <span style="color:var(--src-inv)">[Inventory]</span> 18 new units added...<br>
                    <span style="color:var(--src-ord)">[History]</span> Market pulse shows 3-year rise...<br>
                    <span style="color:var(--src-inv)">[Profit]</span> Est. Gross Margin: <strong>56.2%</strong><br>
                    <span style="color:var(--src-seo)">[SEO]</span> Buyers searching for "Wholesale..."<br>
                    <span style="color:var(--src-ai)">[Action]</span> "Buy 10 units to yield $135..."
                </div>

                <div class="badge" style="color:var(--src-ai)">Verified Engineering-Led Content</div>
            </div>
        </div>

    </div>
</div>

</body>
</html>
